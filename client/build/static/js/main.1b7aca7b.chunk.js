(this.webpackJsonpreadable=this.webpackJsonpreadable||[]).push([[0],{36:function(t,e,n){},60:function(t,e,n){},79:function(t,e,n){"use strict";n.r(e);var c=n(2),o=n(1),r=n(19),a=n.n(r),i=n(23),s=n(26),u=n(14),l=n(62),j=n(16),d=n(8),b=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT,""),h=localStorage.token;h||(h=localStorage.token=Math.random().toString(36).substr(-8));var O={headers:{Accept:"application/json",Authorization:h}};function f(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}var x="RECEIVE_POSTS",m="ADD_POST",p="DELETE_POST",y="EDIT_POST",v="VOTE_POST",g="CATEGORY_POSTS";function S(){return function(t){fetch("/posts",O).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return t})).then((function(e){t(function(t){return{type:x,posts:t}}(e))}))}}function C(t,e,n,c){return function(o){var r;(r=function(t,e,n,c){return{id:f(),timestamp:Date.now(),title:t,body:e,author:n,category:c}}(t,e,n,c),fetch("".concat(b,"/posts"),{method:"POST",headers:{Authorization:h,"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return alert("Please try again ",t)}))).then((function(t){o(function(t){return{type:m,post:t}}(t))}))}}function T(t,e){return function(n){(function(t){return fetch("".concat(b,"/posts/").concat(t.id),{method:"PUT",headers:{Authorization:h,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return alert("Please try again ",t)}))})(t).then((function(t){n(function(t,e){return{type:y,index:e,post:t}}(t,e))}))}}function N(t,e,n){return function(c){(function(t,e){return fetch("".concat(b,"/posts/").concat(e.id),{method:"POST",headers:{Authorization:h,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return alert("Please try again ",t)}))})(e,n).then((function(e){c(function(t,e){return{type:v,index:t,post:e}}(t,e))}))}}function E(t,e){return function(n){(function(t){return fetch("".concat(b,"/posts/").concat(t),{method:"DELETE",headers:{Authorization:h,"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return alert("Please try again ",t)}))})(t).then((function(t){n(function(t,e){return{type:p,post:t,index:e}}(t,e))}))}}function k(t){return function(e){(function(t){return fetch("".concat(b,"/").concat(t,"/posts"),O).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return t}))})(t).then((function(t){e(function(t){return{type:g,posts:t}}(t))}))}}var I="GET_CATEGORY";function P(){return function(t){fetch("".concat(b,"/categories"),O).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return t})).then((function(e){t(function(t){return{type:I,categories:t}}(e))}))}}var A="POST_DETAIL";function D(t){return function(e){(function(t){return fetch("".concat(b,"/posts/").concat(t),O).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return t}))})(t).then((function(t){e(function(t){return{type:A,post:t}}(t))})).catch((function(t){return t}))}}var _="GET_COMMENTS",w="ADD_COMMENT",z="VOTE_COMMENT",F="EDIT_COMMENT",L="DELETE_COMMENT";function H(t){return function(e){(function(t){return fetch("".concat(b,"/posts/").concat(t,"/comments"),O).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return t}))})(t).then((function(t){e(function(t){return{type:_,comments:t}}(t))}))}}function B(t,e,n){return function(c){var o;(o=function(t,e,n){return{id:f(),timestamp:Date.now(),body:t,author:e,parentId:n}}(t,e,n),fetch("".concat(b,"/comments"),{method:"POST",headers:{Authorization:h,"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return t}))).then((function(t){c(function(t){return{type:w,comment:t}}(t))}))}}function V(t,e,n){return function(c){(function(t,e){return fetch("".concat(b,"/comments/").concat(e),{method:"POST",headers:{Authorization:h,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return t}))})(e,n).then((function(e){c(function(t,e){return{type:z,index:t,comment:e}}(t,e))}))}}function M(t,e,n){return function(c){(function(t,e){return fetch("".concat(b,"/comments/").concat(e),{method:"PUT",headers:{Authorization:h,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return t}))})(e,n).then((function(e){c(function(t,e){return{type:F,index:t,comment:e}}(t,e))}))}}function R(t,e){return function(n){(function(t){return fetch("".concat(b,"/comments/").concat(t),{method:"DELETE",headers:{Authorization:h,"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return t}))})(e).then((function(e){n(function(t,e){return{type:L,index:t,comment:e}}(t,e))}))}}var G=Object(s.c)({posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case x:return Object(d.a)({},e.posts);case m:var n=Object.keys(t).length;return Object(d.a)(Object(d.a)({},t),{},Object(j.a)({},n,Object(d.a)({},e.post)));case v:case y:return Object(d.a)(Object(d.a)({},t),{},Object(j.a)({},e.index,Object(d.a)({},e.post)));case p:return Object(d.a)(Object(d.a)({},t),{},Object(j.a)({},e.index,Object(d.a)(Object(d.a)({},e.post),{},{deleted:!0})));case g:return Object(d.a)({},e.posts);default:return t}},categories:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case I:return Object(d.a)({},e.categories);default:return t}},postDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case A:return Object(d.a)({},e.post);default:return t}},comments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case _:return Object(d.a)({},e.comments);case w:var n=Object.keys(t).length;return Object(d.a)(Object(d.a)({},t),{},Object(j.a)({},n,Object(d.a)({},e.comment)));case z:case F:case L:return Object(d.a)(Object(d.a)({},t),{},Object(j.a)({},e.index,Object(d.a)({},e.comment)));default:return t}}}),J=n(11),K=(n(36),n(15)),q=n(85),U=n(86),W=n(65),Y=n(84),Q=n(21),X=n(88),Z=n(89),$=n(64);var tt=Object(u.b)()((function(t){var e=t.post,n=t.index,r=t.dispatch,a=Object(o.useState)({title:e?e.title:"",body:e?e.body:"",author:e?e.author:"",category:e?e.category:"react"}),i=Object(K.a)(a,2),s=i[0],u=i[1],l=function(t){t.persist();var e=t.target,n=e.name,c=e.value;u(Object(d.a)(Object(d.a)({},s),{},Object(j.a)({},n,c)))};return Object(c.jsxs)(X.a,Object(d.a)(Object(d.a)({},t),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(c.jsx)(X.a.Header,{closeButton:!0,children:Object(c.jsx)(X.a.Title,{id:"contained-modal-title-vcenter",children:e&&e.id?"Edit Post":"Add Post "})}),Object(c.jsx)(X.a.Body,{children:Object(c.jsxs)(Z.a,{onSubmit:function(c){c.preventDefault();var o=s.title,a=s.body,i=s.author,l=s.category;r(e?T(Object(d.a)(Object(d.a)({},e),{},{body:a}),n):C(o,a,i,l)),u({title:"",body:"",author:"",category:"react"}),t.onHide()},children:[Object(c.jsxs)(Z.a.Group,{controlId:"exampleForm.ControlInput1",children:[Object(c.jsx)(Z.a.Label,{children:"Post Title"}),Object(c.jsx)(Z.a.Control,{type:"text",name:"title",value:s.title,placeholder:"Title",onChange:l,required:!0,disabled:e})]}),Object(c.jsxs)(Z.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(c.jsx)(Z.a.Label,{children:"post body"}),Object(c.jsx)(Z.a.Control,{name:"body",value:s.body,as:"textarea",rows:3,onChange:l,required:!0})]}),Object(c.jsxs)(Z.a.Group,{controlId:"exampleForm.ControlInput1",children:[Object(c.jsx)(Z.a.Label,{children:"Post Author"}),Object(c.jsx)(Z.a.Control,{type:"text",name:"author",value:s.author,placeholder:"post By",onChange:l,required:!0,disabled:e})]}),Object(c.jsxs)(Z.a.Group,{controlId:"exampleForm.ControlSelect1",children:[Object(c.jsx)(Z.a.Label,{children:"Select category"}),Object(c.jsxs)(Z.a.Control,{name:"category",value:s.category,as:"select",onChange:l,required:!0,disabled:e,children:[Object(c.jsx)("option",{children:"react"}),Object(c.jsx)("option",{children:"redux"}),Object(c.jsx)("option",{children:"udacity"})]})]}),Object(c.jsx)($.a,{variant:"primary",type:"submit",children:"Save"}),Object(c.jsx)($.a,{onClick:t.onHide,variant:"secondary",children:"Close"})]})}),Object(c.jsx)(X.a.Footer,{})]}))})),et=n(90),nt=n(32),ct=n(33);var ot=Object(u.b)((function(t,e){var n=t.posts,c=e.postId;return{index:c,post:n?n[c]:null}}))((function(t){var e=t.post,n=t.dispatch,r=t.index,a=Object(o.useState)(!1),s=Object(K.a)(a,2),u=s[0],l=s[1];return e&&!0!==e.deleted?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(et.a,{className:"postContainer",style:{},children:Object(c.jsxs)(et.a.Body,{children:[Object(c.jsxs)(et.a.Title,{children:[" ",e?e.title:null,Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{onClick:function(){return l(!0)},className:"button",children:Object(c.jsxs)(Y.a,{variant:"success",style:{margin:5},children:["Edit ",Object(c.jsx)(nt.a,{})]})}),Object(c.jsx)("button",{onClick:function(){n(E(e.id,r))},className:"button",children:Object(c.jsxs)(Y.a,{variant:"danger",style:{margin:5},children:["Delete ",Object(c.jsx)(ct.a,{})]})})]})]}),Object(c.jsxs)(et.a.Subtitle,{children:["post by ",e?e.author:null]}),Object(c.jsx)("div",{children:Object(c.jsx)(Y.a,{variant:"primary",children:e?e.category:null})}),Object(c.jsx)(i.b,{to:"/".concat(e.category,"/").concat(e.id),className:"link",children:e?e.body:null}),Object(c.jsxs)("div",{style:{marginTop:10},children:[Object(c.jsx)("span",{className:"voteHover",children:Object(c.jsx)(Q.c,{style:{color:"green",marginBottom:-10,fontSize:23},onClick:function(){n(N(r,{option:"upVote"},e))}})}),Object(c.jsxs)("div",{children:[e?e.voteScore:null,Object(c.jsx)("span",{style:{marginLeft:5,fontSize:15},children:"Votes"})]}),Object(c.jsx)("span",{className:"voteHover",children:Object(c.jsx)(Q.b,{style:{color:"red",marginTop:-15,fontSize:23},onClick:function(){n(N(r,{option:"downVote"},e))}})})]}),Object(c.jsxs)("footer",{className:"blockquote-footer",style:{marginTop:5},children:[null,Object(c.jsx)(i.b,{to:"/".concat(e.category,"/").concat(e.id),className:"link",children:Object(c.jsxs)("p",{children:[e?e.commentCount:null," Comments"]})})]})]})}),Object(c.jsx)(tt,{show:u,onHide:function(){return l(!1)},post:e||null,index:r})]}):null}));var rt=Object(u.b)((function(t,e){var n=t.posts;return{postIds:"vote score"===e.sort?Object.keys(n).sort((function(t,e){return n[e].voteScore-n[t].voteScore})):Object.keys(n).sort((function(t,e){return n[e].timestamp-n[t].timestamp}))}}))((function(t){var e=t.dispatch,n=t.category,r=t.postIds;return Object(o.useEffect)((function(){e(n?k(n):S())}),[n,e]),Object(c.jsx)("ul",{className:"liDecoration",children:r.map((function(t){return Object(c.jsx)("li",{children:Object(c.jsx)(ot,{postId:t})},t)}))})}));var at=Object(u.b)((function(t){var e=t.posts;return{categories:t.categories,posts:e}}))((function(t){var e=t.categories,n=Object(o.useState)(!1),r=Object(K.a)(n,2),a=r[0],s=r[1],u=Object(J.f)().category,l=Object(o.useState)("date"),j=Object(K.a)(l,2),d=j[0],b=j[1];return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"filterContainer",children:[Object(c.jsxs)(q.a,{id:"dropdown-item-button",as:U.a,title:"Caterogy ".concat(u||"all"),children:[Object(c.jsx)(W.a.Item,{eventKey:"all",children:Object(c.jsx)(i.b,{to:"/",className:"link",children:"All"})}),e&&e.categories?e.categories.map((function(t){return Object(c.jsx)(i.b,{to:"/".concat(t.name),className:"link",children:Object(c.jsx)(W.a.Item,{as:"button",eventKey:t.name,children:t.name})},t.name)})):null]}),Object(c.jsxs)(q.a,{id:"dropdown-item-button",className:"categorySpace",title:"Sort by ".concat(d),onSelect:function(t){return b(t)},children:[Object(c.jsx)(W.a.Item,{as:"button",eventKey:"date",children:"date"}),Object(c.jsx)(W.a.Item,{as:"button",eventKey:"vote score",children:"vote score"})]})]}),Object(c.jsx)("button",{onClick:function(){return s(!0)},className:"addPost",children:Object(c.jsxs)(Y.a,{variant:"success",style:{margin:5,width:130,height:35,fontSize:15},children:["Add a post ",Object(c.jsx)(Q.a,{})]})}),Object(c.jsx)(tt,{show:a,onHide:function(){return s(!1)}}),Object(c.jsx)(rt,{category:u,sort:d})]})})),it=n(87),st=n(63);n(60);var ut=Object(u.b)()((function(t){var e=t.index,n=t.comment,r=t.dispatch,a=Object(o.useState)(!1),i=Object(K.a)(a,2),s=i[0],u=i[1],l=Object(o.useState)(n.body),j=Object(K.a)(l,2),b=j[0],h=j[1];return Object(c.jsxs)(et.a.Body,{children:[Object(c.jsxs)(et.a.Subtitle,{children:["Comment By ",n.author,Object(c.jsx)("span",{children:Object(c.jsx)("button",{onClick:function(){return u(!0)},className:"button",children:Object(c.jsx)(nt.a,{})})}),Object(c.jsx)("span",{children:Object(c.jsx)("button",{onClick:function(){return function(t,e){r(R(t,e))}(e,n.id)},className:"button",children:Object(c.jsx)(ct.a,{})})})]}),Object(c.jsxs)("div",{className:"comment__display",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:"voteHover",children:Object(c.jsx)(Q.c,{style:{color:"green",marginBottom:-10},onClick:function(){!function(t,e){r(V(t,{option:"upVote"},e))}(e,n.id)}})}),Object(c.jsxs)("div",{children:[n.voteScore,Object(c.jsx)("span",{style:{marginLeft:5,fontSize:15},children:"Votes"})]}),Object(c.jsx)("span",{className:"voteHover",children:Object(c.jsx)(Q.b,{style:{color:"red",marginTop:-15},onClick:function(){!function(t,e){r(V(t,{option:"downVote"},e))}(e,n.id)}})})]}),Object(c.jsx)("div",{className:s?"":"comment__text",children:Object(c.jsx)("p",{children:s?Object(c.jsx)(Z.a,{onSubmit:function(t){t.preventDefault(),r(M(e,Object(d.a)(Object(d.a)({},n),{},{body:b}),n.id)),u(!1)},className:"commentEditForm",children:Object(c.jsxs)(it.a,{className:"mb-3",children:[Object(c.jsx)(st.a,{placeholder:"Edit your comment","aria-label":"Edit your comment","aria-describedby":"basic-addon2",value:b,onChange:function(t){t.persist(),h(t.target.value)}}),Object(c.jsxs)(it.a.Append,{children:[Object(c.jsx)($.a,{variant:"outline-secondary",type:"submit",children:"Edit"}),Object(c.jsx)($.a,{variant:"outline-secondary",onClick:function(){return u(!1)},children:"cancel"})]})]})}):n.body})})]})]},n.id)}));var lt=Object(u.b)((function(t,e){var n=t.comments,c=e.parentId;return{author:e.author,parentId:c,commentIds:Object.keys(n),comments:n}}))((function(t){var e=t.author,n=t.parentId,r=t.comments,a=t.commentIds,i=t.dispatch,s=Object(o.useState)(""),u=Object(K.a)(s,2),l=u[0],j=u[1];return Object(c.jsxs)(et.a,{className:"commentContainer",children:[Object(c.jsx)(et.a.Title,{style:{margin:6},children:" Comments"}),Object(c.jsx)(Z.a,{onSubmit:function(t){t.preventDefault(),i(B(l,e,n)),j("")},className:"commentAddForm",children:Object(c.jsxs)(it.a,{className:"mb-3",children:[Object(c.jsx)(st.a,{placeholder:"Add your comment","aria-label":"Add your comment","aria-describedby":"basic-addon2",value:l,onChange:function(t){t.persist(),j(t.target.value)}}),Object(c.jsx)(it.a.Append,{children:Object(c.jsx)($.a,{variant:"outline-secondary",type:"submit",disabled:""===l,children:"Add"})})]})}),r?a.map((function(t){return!0!==r[t].deleted?Object(c.jsx)(ut,{index:t,comment:r[t]},t):null})):Object(c.jsx)(c.Fragment,{})]})}));var jt=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("h1",{style:{color:"rgb(38, 100, 233)"},children:"404 Not Found"})})};var dt=Object(J.g)(Object(u.b)((function(t,e){var n=t.postDetail;return t.posts,{post:n,index:0}}))((function(t){var e=t.post,n=t.dispatch,r=t.index,a=Object(o.useState)(!1),i=Object(K.a)(a,2),s=i[0],u=i[1],l=Object(J.f)().postId;return Object(o.useEffect)((function(){n(D(l)),e&&n(H(l))})),e&&e.id&&!0!==e.deleted?Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)(et.a,{className:"postCommentContainer",children:[Object(c.jsxs)(et.a.Body,{children:[Object(c.jsxs)(et.a.Title,{children:[" ",e?e.title:null,Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{onClick:function(){return u(!0)},className:"button",children:Object(c.jsxs)(Y.a,{variant:"success",style:{margin:5},children:["Edit ",Object(c.jsx)(nt.a,{})]})}),Object(c.jsx)("button",{onClick:function(){n(E(e.id,r))},className:"button",children:Object(c.jsxs)(Y.a,{variant:"danger",style:{margin:5},children:["Delete ",Object(c.jsx)(ct.a,{})]})})]})]}),Object(c.jsxs)(et.a.Subtitle,{children:["post by ",e?e.author:null]}),Object(c.jsx)("div",{children:Object(c.jsx)(Y.a,{variant:"primary",children:e?e.category:null})}),e?e.body:null,Object(c.jsxs)("div",{style:{marginTop:10},children:[Object(c.jsx)("span",{className:"voteHover",children:Object(c.jsx)(Q.c,{style:{color:"green",marginBottom:-10,fontSize:23},onClick:function(){n(N(r,{option:"upVote"},e))}})}),Object(c.jsxs)("div",{children:[e?e.voteScore:null,Object(c.jsx)("span",{style:{marginLeft:5,fontSize:15},children:"Votes"})]}),Object(c.jsx)("span",{className:"voteHover",children:Object(c.jsx)(Q.b,{style:{color:"red",marginTop:-15,fontSize:23},onClick:function(){n(N(r,{option:"downVote"},e))}})})]}),Object(c.jsxs)("footer",{className:"blockquote-footer",style:{marginTop:5},children:[null,Object(c.jsxs)("p",{children:[e?e.commentCount:null," Comment"]})]})]}),Object(c.jsx)(lt,{author:e?e.author:null,parentId:e?e.id:null})]}),Object(c.jsx)(tt,{show:s,onHide:function(){return u(!1)},post:e||null,index:r})]}):Object(c.jsx)(jt,{})})));var bt=function(){return Object(c.jsx)("div",{className:"navContainer",children:Object(c.jsx)("h1",{children:"Readable"})})};var ht=Object(u.b)()((function(t){return Object(o.useEffect)((function(){t.dispatch(P())})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(bt,{}),Object(c.jsxs)(J.c,{children:[Object(c.jsx)(J.a,{exact:!0,path:"/",children:Object(c.jsx)(at,{})}),Object(c.jsx)(J.a,{exact:!0,path:"/:category",children:Object(c.jsx)(at,{})}),Object(c.jsx)(J.a,{path:"/:category/:postId",children:Object(c.jsx)(dt,{})})]})]})})),Ot=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,91)).then((function(e){var n=e.getCLS,c=e.getFID,o=e.getFCP,r=e.getLCP,a=e.getTTFB;n(t),c(t),o(t),r(t),a(t)}))},ft=(n(78),Object(s.d)(G,Object(s.a)(l.a)));a.a.render(Object(c.jsx)(u.a,{store:ft,children:Object(c.jsx)(i.a,{children:Object(c.jsx)(ht,{})})}),document.getElementById("root")),Ot()}},[[79,1,2]]]);
//# sourceMappingURL=main.1b7aca7b.chunk.js.map